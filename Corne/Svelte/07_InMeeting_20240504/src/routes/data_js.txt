// src/routes/your-route/+page.js

import Papa from 'papaparse';

async function fetchCSV(url) {
  const response = await fetch(url, {
    headers: {
      'Content-Type': 'text/csv'
    }
  });
  const text = await response.text();
  return Papa.parse(text, { skipEmptyLines: true, header: true }).data.slice(0, 10);
}

export async function load({ fetch }) {
  const plantsData = await fetchCSV('http://localhost:5173/data/plants.csv');
  const customersData = await fetchCSV('http://localhost:5173/data/Customers.csv');

  return {
    props: {
      plantsData,
      customersData
    }
  };
}
